<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>定义积木块 | MakeCode(PXT)</title>
    <meta name="description" content="MakeCode(PXT).">
    <link rel="preload stylesheet" href="/pxt-doc/assets/style.6fa9e57f.css" as="style">
    <link rel="modulepreload" href="/pxt-doc/assets/app.c798c272.js">
    <link rel="modulepreload" href="/pxt-doc/assets/guide_defining-blocks.md.7a82cb49.lean.js">
    
    <link rel="icon" href="/logo.svg">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-93a960b4><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-93a960b4 data-v-0fa0e57d><div class="VPNavBar has-sidebar" data-v-0fa0e57d data-v-be450ad9><div class="container" data-v-be450ad9><div class="title" data-v-be450ad9><div class="VPNavBarTitle has-sidebar" data-v-be450ad9 data-v-6d2fb2d9><a class="title" href="/pxt-doc/" data-v-6d2fb2d9><!--[--><!--]--><!--[--><img class="VPImage logo" src="/pxt-doc/logo.svg" alt data-v-6db2186b><!--]--><!--[-->MakeCode(PXT)<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-be450ad9><div class="curtain" data-v-be450ad9></div><div class="content-body" data-v-be450ad9><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-be450ad9 data-v-bdedfc22><span id="main-nav-aria-label" class="visually-hidden" data-v-bdedfc22>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/pxt-doc/guide/what-is-pxt" data-v-bdedfc22 data-v-95f5d58b data-v-30c06bd3><!--[-->指南<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="https://makecode.com/docs" target="_blank" rel="noreferrer" data-v-bdedfc22 data-v-95f5d58b data-v-30c06bd3><!--[-->来源<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-be450ad9 data-v-da3f667a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-da3f667a data-v-0d529b6d data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-0d529b6d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-0d529b6d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-be450ad9 data-v-2ab2a029 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/tuliwen" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-be450ad9 data-v-f38c483a data-v-96001b6b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-96001b6b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-96001b6b><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-96001b6b><div class="VPMenu" data-v-96001b6b data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-f38c483a><div class="item appearance" data-v-f38c483a><p class="label" data-v-f38c483a>Appearance</p><div class="appearance-action" data-v-f38c483a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-f38c483a data-v-0d529b6d data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-0d529b6d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-0d529b6d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-f38c483a><div class="item social-links" data-v-f38c483a><div class="VPSocialLinks social-links-list" data-v-f38c483a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/tuliwen" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-be450ad9 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-93a960b4 data-v-2817d72e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2817d72e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-2817d72e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-2817d72e>Menu</span></button><a class="top-link" href="#" data-v-2817d72e>Return to top</a></div><aside class="VPSidebar" data-v-93a960b4 data-v-c79ccefa><div class="curtain" data-v-c79ccefa></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-c79ccefa><span class="visually-hidden" id="sidebar-aria-label" data-v-c79ccefa> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0 collapsible has-active" data-v-c79ccefa data-v-76409885><div class="item" role="button" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link" data-v-76409885 data-v-30c06bd3><!--[--><h2 class="text" data-v-76409885>介绍</h2><!--]--><!----></a><div class="caret" role="button" data-v-76409885><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-76409885><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-76409885><!--[--><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/what-is-pxt" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>什么是PXT？</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/target-creation" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>创建目标</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/pxtarget" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>paxtarget.json</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/defining-blocks" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>定义积木块</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/simshim" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>自动生成.d.ts</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/staticpkg" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>打包静态页面</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/simulator" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>模拟器</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/theming" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>主题</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/board" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>主板定义</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/async" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>异步和线程</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/partial-flashing" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>部分闪烁</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/source-embedding" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>源代码嵌入</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/samd21targets" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>SAMD21目标</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0 collapsible" data-v-c79ccefa data-v-76409885><div class="item" role="button" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link" data-v-76409885 data-v-30c06bd3><!--[--><h2 class="text" data-v-76409885>创建扩展</h2><!--]--><!----></a><div class="caret" role="button" data-v-76409885><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-76409885><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-76409885><!--[--><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/extensions" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>makecode扩展</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/guide/pxt-json" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>pxt.json</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0 collapsible" data-v-c79ccefa data-v-76409885><div class="item" role="button" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link" data-v-76409885 data-v-30c06bd3><!--[--><h2 class="text" data-v-76409885>命令行界面</h2><!--]--><!----></a><div class="caret" role="button" data-v-76409885><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-76409885><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-76409885><!--[--><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/CL/cli" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>命令行工具</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/CL/build" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>build</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/CL/bump" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>bump</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/CL/cherrypick" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>cherrypick</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/CL/deploy" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>deploy</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/CL/login" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>login</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/CL/staticpkg" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>staticpkg</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/CL/update" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>update</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/CL/pyconv" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>pyconv</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="/pxt-doc/CL/hidserial" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>hidserial</p><!--]--><!----></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0 collapsible" data-v-c79ccefa data-v-76409885><div class="item" role="button" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link" data-v-76409885 data-v-30c06bd3><!--[--><h2 class="text" data-v-76409885>文档和翻译</h2><!--]--><!----></a><div class="caret" role="button" data-v-76409885><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-76409885><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-76409885><!--[--><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="https://makecode.com/writing-docs" target="_blank" rel="noreferrer" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>编写文档</p><!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-30c06bd3><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="https://makecode.com/translate" target="_blank" rel="noreferrer" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>翻译</p><!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-30c06bd3><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0 collapsible" data-v-c79ccefa data-v-76409885><div class="item" role="button" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link" data-v-76409885 data-v-30c06bd3><!--[--><h2 class="text" data-v-76409885>设备特有资源</h2><!--]--><!----></a><div class="caret" role="button" data-v-76409885><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-76409885><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-76409885><!--[--><div class="VPSidebarItem level-1 is-link" data-v-76409885 data-v-76409885><div class="item" data-v-76409885><div class="indicator" data-v-76409885></div><a class="VPLink link link" href="http://github.com/microsoft/uf2" target="_blank" rel="noreferrer" data-v-76409885 data-v-30c06bd3><!--[--><p class="text" data-v-76409885>UF2文件格式</p><!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-30c06bd3><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><div class="caret" role="button" data-v-76409885><!----></div></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-93a960b4 data-v-0bd490fb><div class="VPDoc has-sidebar has-aside" data-v-0bd490fb data-v-c5936a1e><div class="container" data-v-c5936a1e><div class="aside" data-v-c5936a1e><div class="aside-curtain" data-v-c5936a1e></div><div class="aside-container" data-v-c5936a1e><div class="aside-content" data-v-c5936a1e><div class="VPDocAside" data-v-c5936a1e data-v-cdc66372><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-cdc66372 data-v-5dd9d5f6><div class="content" data-v-5dd9d5f6><div class="outline-marker" data-v-5dd9d5f6></div><div class="outline-title" data-v-5dd9d5f6>在此页面上</div><nav aria-labelledby="doc-outline-aria-label" data-v-5dd9d5f6><span class="visually-hidden" id="doc-outline-aria-label" data-v-5dd9d5f6> Table of Contents for current page </span><ul class="root" data-v-5dd9d5f6 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-cdc66372></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c5936a1e><div class="content-container" data-v-c5936a1e><!--[--><!--]--><main class="main" data-v-c5936a1e><div style="position:relative;" class="vp-doc _pxt-doc_guide_defining-blocks" data-v-c5936a1e><div><h1 id="定义积木块" tabindex="-1">定义积木块 <a class="header-anchor" href="#定义积木块" aria-hidden="true">#</a></h1><p>本节介绍如何注释您的生成代码 API，以便在块编辑器中公开它们。</p><blockquote><p>在<a href="https://makecode.com/playground" target="_blank" rel="noreferrer">Playground</a>上现场尝试一些积木，看看它们是如何工作的。修改它们甚至创建新的！</p></blockquote><p>块是由添加到 API 元素（导出函数、方法、枚举等）开头的注释定义的。属性是在以注释形式开头的注释行上指定的。所有注释都可以在包含公开 API 代码的 TypeScript 库文件中找到。它们可以从 C++库文件或 TypeScript 模拟器文件<a href="https://makecode.com/simshim" target="_blank" rel="noreferrer">自动生成</a>。</p><h2 id="类别" tabindex="-1">类别 <a class="header-anchor" href="#类别" aria-hidden="true">#</a></h2><p>每个顶级 TypeScript 命名空间用于填充块编辑器工具箱中的类别。名称将在工具箱中自动大写。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">basic</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>您还可以为名称空间提供 JSDoc 注释、颜色和权重，以及友好名称（Unicode）。我们强烈建议仔细选择颜色，因为它会显著影响块的外观和可读性。同一名称空间中的所有块都具有相同的颜色，以便用户可以从样本中轻松找到类别。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * Provides access to basic micro:bit functionality.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% color=190 weight=100 icon=&quot;\uf1ec&quot; block=&quot;Basic Blocks&quot;</span></span>
<span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">basic</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li><code>icon</code> 要显示的图标字体中的 Unicode 字符。可以使用 Font Awesome 中的任何免费非品牌图标（在撰写本文时为 v5.15.4）。可以找到完整列表 <a href="https://fontawesome.com/v5/search?m=free" target="_blank" rel="noreferrer">https://fontawesome.com/v5/search?m=free</a></li><li><code>color</code> 应包含在以开头的注释行中。颜色采用色调值或 HTML 颜色 <code>//%</code></li><li><code>weight</code> 确定类别在工具箱中的位置。更高的 weight 意味着它看起来更接近顶部。</li></ul><p>要在块编辑器工具箱的“高级”部分下显示类别，请添加注释 <code>advanced=true</code></p><h3 id="类别组" tabindex="-1">类别组 <a class="header-anchor" href="#类别组" aria-hidden="true">#</a></h3><p>通过在组内将相似或相关的块分<a href="https://makecode.com/playground#basic-groups" target="_blank" rel="noreferrer">组</a>在一起，可以使块类别更具组织性。使用组功能时，同一组的块将一起出现在工具箱弹出按钮中，并且组的标签将显示在其上方。这使得用户更容易浏览可用的块。</p><p>要定义组，请将组属性添加到命名空间。<code>groups</code> 属性是组名称的数组。定义每个块时，可以将块单独指定给这些组。</p><blockquote><p><strong>小贴士:</strong> 定义组的顺序是组在工具箱弹出按钮中显示的顺序。未指定给命名组的块将放置在默认的 <code>other</code> 组中，该组不显示标签。 <code>other</code> 组可用于决定未分组块将按组顺序出现的位置。这取决于您将 <code>others</code> 放置在 <code>groups</code> 数组中的位置。*将块指定给组时，名称区分大小写，因此请确保放置在块上的组名称与组定义中的组名称相同。</p></blockquote><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * Provides access to basic micro:bit functionality.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% color=190 weight=100 icon=&quot;\uf1ec&quot; block=&quot;Basic Blocks&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% groups=[&#39;LED matrix&#39;, &#39;Control flow&#39;, &#39;others&#39;]</span></span>
<span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">basic</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span></code></pre></div><h2 id="方块" tabindex="-1">方块 <a class="header-anchor" href="#方块" aria-hidden="true">#</a></h2><p>具有 <code>block</code> 属性的所有 <strong>导出函数</strong> 将在块编辑器中可用。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% block</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">showNumber</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">v</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">interval</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">150</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p>如果需要对块的外观进行更多控制，可以指定 <code>blockId</code> 和 <code>block</code> 参数。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% blockId=device_show_number</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% block=&quot;show|number $v&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">showNumber</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">v</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">interval</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">150</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><ul><li><code>blockId</code> 是块的常量、唯一 id。此 id 在块代码中序列化，因此更改它将破坏您的用户。如果未指定，它是从命名空间和函数名派生的，因此重命名函数或命名空间将破坏 TypeScript 和 Blocks 用户。</li><li><code>block</code> 包含构建块结构的语法（下面将详细介绍）。</li></ul><p>还可以使用其他可选属性： <code>inlineInputMode=external</code> 强制外部输入渲染。这会导致块参数在多行之间换行，而不是保持内联。有关更多信息，请参阅<a href="https://makecode.com/defining-blocks#inline-input" target="_blank" rel="noreferrer">内联输入</a>部分。<code>advanced=true</code> 会将此块置于父类别的“更多…”子类别下。默认情况下，用于隐藏高级或很少使用的块</p><h2 id="块语法" tabindex="-1">块语法 <a class="header-anchor" href="#块语法" aria-hidden="true">#</a></h2><p><code>block</code> 属性指定如何组织函数的参数以创建块。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">block </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> field</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">|</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> field }</span></span>
<span class="line"><span style="color:#F07178;">field </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> string</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> string </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">$</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> parameter</span></span>
<span class="line"><span style="color:#A6ACCD;">parameter </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> string</span></span>
<span class="line"></span></code></pre></div><ul><li>每个 <code>field</code> 都映射到块上的字段名。</li><li>函数参数映射到具有相同名称的 <code>$parameter</code> 参数。加载器自动构建块字段名和函数名之间的映射。</li><li>当有四个或更多参数时，块将自动切换到外部输入（包装）</li><li><code>|</code> 表示如果块处于外部输入模式，则从何处开始新行。</li></ul><h2 id="自定义块本地化" tabindex="-1">自定义块本地化 <a class="header-anchor" href="#自定义块本地化" aria-hidden="true">#</a></h2><p>您可以通过提供 <code>block.loc.locale</code> 条目来覆盖 <code>block</code> 中用于特定区域设置的值。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">block</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">loc</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">LOCALE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> blocksyntax</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>例如</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% block=&quot;square $x&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% block.loc.fr=&quot;$x au carré&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">square</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p>您还可以重写 <code>jsdoc</code> 描述和参数信息。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">jsdoc</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">loc</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">LOCALE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> translated jsdoc</span></span>
<span class="line"><span style="color:#A6ACCD;">PARAM</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">loc</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">LOCALE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> parameter jsdoc</span></span>
<span class="line"></span></code></pre></div><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    Computes the square of x</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#676E95;font-style:italic;"> the number to square</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">**/</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% block=&quot;square $x&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% block.loc.fr=&quot;$x au carré&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% jsdoc.loc.fr=&quot;Calcule le carré de x&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% x.loc.fr=&quot;le nombre&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">square</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><h2 id="支持的类型" tabindex="-1">支持的类型 <a class="header-anchor" href="#支持的类型" aria-hidden="true">#</a></h2><p>要导出的函数签名支持以下<a href="https://makecode.com/playground#basic-types" target="_blank" rel="noreferrer">类型</a>：</p><ul><li><code>number</code>（TypeScript）或 <code>int</code>（C++）</li><li><code>string</code>（TypeScript）或 <code>StringData*</code>（C++）</li><li>enums（见下文）</li><li>也被导出的自定义类</li><li>上面的数组</li></ul><h2 id="指定阴影块" tabindex="-1">指定阴影块 <a class="header-anchor" href="#指定阴影块" aria-hidden="true">#</a></h2><p>“阴影”块是一个不能从其父块中删除的块，但可以将其他块放在其顶部。它们用于确保块输入始终具有有效值，而不是在删除块时留下“洞”。所有参数都在 PXT 中为支持的类型（如上所列）提供了阴影块。要为不支持的类型指定阴影块或覆盖默认阴影，请使用以下语法：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% block=&quot;$myParam&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% myParam.shadow=&quot;myShadowBlockID&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">myFunction</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">myParam</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p>如果现有块定义指定了块字符串中的阴影块 id，则可以使用上述语法更改值，而不更改块字符串。这允许在不使块的本地化无效的情况下更改阴影块。将阴影 id 设置为 <code>unset</code> 将删除任何现有的阴影值。</p><h2 id="指定最小值、最大值和默认值" tabindex="-1">指定最小值、最大值和默认值 <a class="header-anchor" href="#指定最小值、最大值和默认值" aria-hidden="true">#</a></h2><p>对于类型 <code>number</code> 的参数，可以指定最小值、最大值和默认值，如下所示：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% block</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% v.min=0 v.max=42 v.defl=25</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">showNumber</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">v</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">interval</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">150</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p><strong>Playground 示例</strong>：<a href="https://makecode.com/playground#field-editors-range" target="_blank" rel="noreferrer">范围</a>、<a href="https://makecode.com/playground#basic-default-values" target="_blank" rel="noreferrer">默认值</a></p><h2 id="报告程序块和报表块" tabindex="-1">报告程序块和报表块 <a class="header-anchor" href="#报告程序块和报表块" aria-hidden="true">#</a></h2><p>报告块是可以插入其他块的输入的圆形或六边形块。任何返回类型不是 void 的函数，如果它具有 <code>block</code> 注释属性，则将被制作为报告程序块。有时有一些函数返回值，但作为语句也很有用，例如 <code>Array.pop()</code>返回数组的一个元素，但在 JavaScript 中通常忽略该值。要定义同时具有报告器和语句窗体的块，请使用 <code>blockAliasFor</code> 注释属性：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * Remove the last element from an array and return it.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% blockId=&quot;array_pop&quot; block=&quot;get and remove last value from $list&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pop</span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * Remove the last element from an array.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% blockId=&quot;array_pop_statement&quot; block=&quot;remove last value from $list&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% blockAliasFor=&quot;Array.pop&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_popStatement</span><span style="color:#89DDFF;">():</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>在上面的示例中，<code>pop()</code> 和 <code>_popStatement()</code> 定义的块都将转换为 <code>Array.pop()</code>。请注意， <code>_popStatements()</code> 以下划线开头，以防止在 monaco 编辑器中以文本补全形式显示。任何定义为别名的块都应具有与源函数相同的参数。<code>blockAliasFor</code> 的值应该是源函数的完全限定名。</p><h2 id="数组默认值" tabindex="-1">数组默认值 <a class="header-anchor" href="#数组默认值" aria-hidden="true">#</a></h2><p>对于原始类型的数组，块上的默认值是根据函数签名中的数组类型生成的。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% block=&quot;$myParam&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mySimpleFunction</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">myParam</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p>对于具有非基元或自定义类型的数组，将阴影 ID 设置为“lists_create_with”，并使用您希望填充数组的元素类型的 blockId 设置参数的默认值。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% block=&quot;$myParam&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% myParam.shadow=&quot;lists_create_with&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% myParam.defl=&quot;screen_image_picker&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">myFunction</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">myParam</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Image</span><span style="color:#A6ACCD;">[]</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><blockquote><p><strong>小贴士：</strong> 上面的示例将仅在 Arcade 编辑器中渲染，因为这是支持 Image 类型的地方。</p></blockquote><p><strong>Playground 示例：</strong><a href="https://makecode.com/playground#basic-array-default-values" target="_blank" rel="noreferrer">数组默认值</a></p><h2 id="输入格式" tabindex="-1">输入格式 <a class="header-anchor" href="#输入格式" aria-hidden="true">#</a></h2><h3 id="内联输入" tabindex="-1">内联输入 <a class="header-anchor" href="#内联输入" aria-hidden="true">#</a></h3><p>具有四个或更多参数的块将自动切换到 <code>External Inputs</code> 模式，在该模式下，参数将换行而不是保持内联。要使具有多个参数的块显示为单行，请使用 <code>inlineInputMode=inline</code>。该块将从左向右展开，而不是将参数输入包装在多行上。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% block=&quot;map $value|from low $fromLow|high $fromHigh|to low $toLow|high $toHigh&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% inlineInputMode=inline</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">map</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fromLow</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">fromHigh</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">toLow</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">toHigh</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> ((</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fromLow</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">toHigh</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">toLow</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">fromHigh</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fromLow</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">toLow</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>要强制外部输入，请设置 <code>inlineInputMode=external</code>。在块定义中，如果块处于外部输入模式，则 <code>|</code> 指示新行的起始位置。在每个参数之后也会开始新行。</p><p><strong>Playground 示例：</strong><a href="https://makecode.com/playground#basic-input-format" target="_blank" rel="noreferrer">内联输入</a></p><h3 id="可扩展参数" tabindex="-1">可扩展参数 <a class="header-anchor" href="#可扩展参数" aria-hidden="true">#</a></h3><p>如果块有多个参数，但其中一些或所有参数可能仍设置为默认值，则可以将块设置为可扩展。这简化了块，并且在未展开时显得更短。</p><p>设置为展开的块部分由两个字段分隔符 <code>||</code> 分隔。在以下示例中，两个可选参数与块定义的第一部分分隔开 <code>|| </code>：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% block=&quot;play an alarm sound || of $sound for $duration ms&quot;</span></span>
<span class="line"></span></code></pre></div><p><code>expandableArgumentMode</code> 属性控制参数的展开方式。在本示例中，它设置为 <code>toggle</code>，这将显示一个 (+) 图标，该图标在单击时展开块。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AlarmSound</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% block=&quot;annoy&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  Annoy</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% block=&quot;alert&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  Alert</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% color=&quot;#AA278D&quot;</span></span>
<span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">alarms</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Play an alarm sound for some time</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">sound</span><span style="color:#676E95;font-style:italic;"> of the alarm to play</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">duration</span><span style="color:#676E95;font-style:italic;"> of the alarm sound</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% block=&quot;play an alarm sound || of $sound for $duration ms&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% duration.shadow=timePicker</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% expandableArgumentMode=&quot;toggle&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% sound.defl=AlarmSound.Annoy</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% duaration.defl=2000</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">alarmSound</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">sound</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">AlarmSound</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">duration</span><span style="color:#89DDFF;">?:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>以下是 <code>expandableArgumentMode</code> 的设置：</p><ul><li><code>toggle</code> - 选择（单击）展开图标时展开所有参数</li><li><code>enabled</code> - 对于展开图标的每个选择（单击），一次展开一个参数。</li><li><code>disabled</code> - 不要展开任何参数，保持块折叠。未显示图标。</li></ul><p><strong>Playground 示例：</strong><a href="https://makecode.com/playground#basic-input-format" target="_blank" rel="noreferrer">内联输入</a></p><h2 id="带参数的回调" tabindex="-1">带参数的回调 <a class="header-anchor" href="#带参数的回调" aria-hidden="true">#</a></h2><p>接受回调函数的 API 将把回调转换为语句输入。如果 API 中的回调被设计为接受参数，则可以使用$NAME 注释在块上指定这些参数（与指定函数参数的方式相同）。例如：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * Run code when a certain kind of sprite is created</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">kind</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">sprite</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% draggableParameters=&quot;reporter&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% blockId=spritesoncreated block=&quot;on created $sprite of kind $kind&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% kind.defl=spritekind</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onCreated</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">kind</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handler</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">sprite</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Sprite</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=void):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>在上面的示例中，设置 <code>draggableParameters=“reporter”</code> 使参数成为报告器块，可以从块中拖动（和复制）并在事件处理程序中使用，就像本地范围变量一样。</p><p><strong>Playground 示例：</strong><a href="https://makecode.com/playground#functions" target="_blank" rel="noreferrer">函数</a>, <a href="https://makecode.com/playground#basic-types" target="_blank" rel="noreferrer">块类型</a>, <a href="https://makecode.com/playground#events" target="_blank" rel="noreferrer">事件</a></p><h2 id="枚举" tabindex="-1">枚举 <a class="header-anchor" href="#枚举" aria-hidden="true">#</a></h2><p>支持枚举，并将自动由块中的下拉列表表示。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Button</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  A </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  B </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% blockId=&quot;ApB&quot; block=&quot;A+B&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  AB </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>初始值设定项可用于映射值</li><li><code>blockId</code> 属性可用于覆盖块 id</li><li><code>block</code> 属性可用于覆盖渲染的字符串</li></ul><p><strong>提示：非枚举参数的下拉列表</strong></p><p>可以为非枚举的参数提供下拉列表。它包括以下步骤：*使用所需的下拉条目创建枚举</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Delimiters</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% block=&quot;new line&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  NewLine </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% block=&quot;,&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  Comma </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>将枚举作为参数并返回相应值的函数</li></ul><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% blockId=&quot;delimiter_conv&quot; block=&quot;$del&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">delimiters</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">del</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Delimiters</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">switch</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">del</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Delimiters</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">NewLine</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Delimiters</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Comma</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>使用枚举转换函数块 id（<code>delimiter_conv</code>）作为此参数的阴影块的值</li></ul><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% blockId=&quot;read_until&quot; block=&quot;read until $del&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% del.shadow=delimiter_conv</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">readUntil</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">del</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><strong>提示：使用常量下拉列表</strong></p><p>TypeScript 中的枚举可能是冗长的，因此有时需要将下拉列表编译为常量变量而不是枚举成员（例如，<code>Item.Shovel</code> 可以改为 <code>Shovel</code>）。</p><p>要实现此行为，请在枚举中将 <code>emitAsConstant</code> 设置为 true</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% emitAsConstant</span></span>
<span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Item</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% block=&quot;Iron&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  Iron </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>然后为该枚举成员声明一个常量，如下所示：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% enumIdentity=&quot;Item.Iron&quot;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> IRON </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Item</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Iron</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>如果枚举具有填充函数，则也可以像设置枚举成员一样设置 <code>blockIdentity</code>。这将使反编译器将该常量的任何实例转换为该枚举的块。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% emitAsConstant</span></span>
<span class="line"><span style="color:#C792EA;">enum</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Item</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% block=&quot;Iron&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% blockIdentity=&quot;blocks.item&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  Iron </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">blocks</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% shim=TD_ID</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% blockId=minecraftItem</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% block=&quot;item $item&quot;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">item</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">item</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Item</span><span style="color:#89DDFF;">):</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% enumIdentity=&quot;Item.Iron&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% blockIdentity=&quot;blocks.item&quot;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> IRON </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Item</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Iron</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p><strong>提示：字符串参数的隐式转换</strong></p><p>如果您有一个将字符串作为参数的 API，则可以绕过在块编辑器中进行的常规类型检查，并允许将任何类型的块放置在输入中。PXT 将自动将连接到参数输入的任何块转换为生成的 TypeScript 中的字符串。要启用该行为，请在参数上设置 <code>shadowOptions.toString</code>，如下所示：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% blockId=console_log block=&quot;console|log $text&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% text.shadowOptions.toString=true</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">log</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">serial</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">writeString</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">text</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\r\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><strong>Playground 示例：</strong><a href="https://makecode.com/playground#basic-enums" target="_blank" rel="noreferrer">枚举</a></p><h3 id="使用块创建枚举" tabindex="-1">使用块创建枚举 <a class="header-anchor" href="#使用块创建枚举" aria-hidden="true">#</a></h3><p>可以让块本身动态定义枚举。该块将指定一些初始成员，但通过在参数下拉列表中选择“Add a new&lt;enum_name&gt;…”选项可以添加其他成员。</p><p>首先创建一个定义枚举并具有初始成员的阴影块。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% shim=ENUM_GET</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% blockId=planet_enum_shim</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% block=&quot;Planet $arg&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% enumName=&quot;Planets&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% enumMemberName=&quot;planet&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% enumPromptHint=&quot;e.g. Saturn, Mars, ...&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% enumInitialMembers=&quot;Mecury, Venus, Earth&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_planetEnumShim</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">arg</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>这个函数实际上不会出现在用户代码中，它只是用于定义块。为了确保该函数不会在 intellisense 中显示，在其名称的开头添加一个“_”。</p><p>示例中显示的所有注释属性都是必需的（包括 <code>shim</code> 、<code>blockId</code> 和 <code>block</code>）。枚举属性的工作方式如下：</p><ul><li><code>enumName</code> - 枚举的名称。必须是有效的 JavaScript 标识符。</li><li><code>enumMemberName</code> - 将用于在对话框和块中引用枚举成员的名称。这应该是独一无二的。</li><li><code>enumPromptHint</code> - 将出现在用于创建枚举的新成员的对话框中的提示。</li><li><code>enumInitialMembers</code> - 这些是使用此块时始终添加到项目中的枚举值。第一个值是默认选择。它是逗号或空格分隔的，所有成员都使用有效的 JavaScript 标识符。列表必须至少有一个值。</li><li><code>enumStartValue</code> （可选）-一个正整数，指定从块到 TypeScript 时将发出的最小值。</li></ul><p>只有在项目中使用了该块（或在过去使用过）时，才会在用户代码的顶部发出枚举。如果用户在 TypeScript 中更改了枚举的值，那么当切换回块时，这些更改应该保持不变。</p><p>当函数使用枚举阴影块时，传入参数的类型应为 <code>number</code>（不要使用 <code>enum</code> 类型）。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% blockId=planet_id</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% block=&quot;planet id from $planet&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% planet.shadow=&quot;planet_enum_shim&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">whatPlanet</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">planet</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">planet</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><strong>Playground 示例：</strong><a href="https://makecode.com/playground#language-create-enums" target="_blank" rel="noreferrer">使用块创建枚举</a></p><h2 id="jsdoc" tabindex="-1">JSDoc <a class="header-anchor" href="#jsdoc" aria-hidden="true">#</a></h2><p>JSDoc 注释将自动用作块的工具提示。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * Scroll a number on the screen. If the number fits on the screen (i.e. is a single digit), do not scroll.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">interval</span><span style="color:#676E95;font-style:italic;"> speed of scroll</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% block</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% help=functions/show-number</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">showNumber</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">interval</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">150</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p>可选的 <code>help</code> 属性可用于指向特定的文档路径。要定义扩展块的自定义帮助，请参阅 <a href="https://makecode.com/extensions/github-authoring" target="_blank" rel="noreferrer">GitHub extension Authoring</a>。</p><h2 id="对象和实例方法" tabindex="-1">对象和实例方法 <a class="header-anchor" href="#对象和实例方法" aria-hidden="true">#</a></h2><p>可以直接公开实例方法和对象工厂，也可以通过一点扁平化（这是推荐的，因为扁平化的 C 样式 API 最好映射到块）。</p><h3 id="直接创建" tabindex="-1">直接创建 <a class="header-anchor" href="#直接创建" aria-hidden="true">#</a></h3><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//%</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Message</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//% blockId=&quot;message_get_text&quot; block=&quot;$this|text&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">getText</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>注释实例方法时，需要在块语法定义中指定 <code>$this</code> 参数。</li></ul><p>您需要公开一个工厂方法来根据需要创建对象。对于上面的示例，我们添加一个创建消息的函数：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% blockId=&quot;create_message&quot; block=&quot;create message|with $text&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createMessage</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Message</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Message</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">text</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="自动创建" tabindex="-1">自动创建 <a class="header-anchor" href="#自动创建" aria-hidden="true">#</a></h3><p>如果对象具有合理的默认构造函数，并且即使稍后需要覆盖变量，调用此构造函数也是无害的，那么将无参数函数指定为自动创建很有用，如下所示：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">images</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">emptyImage</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">width</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">height</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">):</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Image</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% autoCreate=images.emptyImage</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Image</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>现在，当用户添加引用方法的块时，将自动引入全局变量，并使用 <code>Image</code> <code>images.emptyImage()</code> 初始化全局变量</p><p>在默认构造函数具有副作用（例如，配置 pin）的情况下，或者如果默认值最常被重写，则不应使用该语法。<code>autoCreate</code></p><h3 id="固定实例集" tabindex="-1">固定实例集 <a class="header-anchor" href="#固定实例集" aria-hidden="true">#</a></h3><p>有时，给定类的实例数是固定的。一个例子是表示电子板上的引脚的对象。可以以类似于枚举的方式公开这些实例：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% fixedInstances</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% blockNamespace=pins</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DigitalPin</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//% blockId=device_set_digital_pin block=&quot;digital write|pin $this|to $value&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">digitalWrite</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">pins</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//% fixedInstance</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">D0</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">DigitalPin</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//% fixedInstance</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">D1</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">DigitalPin</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>这将导致一个块，其中第一个孔是带有和的下拉孔，第二个孔是常规整数值。变量可以具有其他注释（例如）。目前，仅支持变量（或）<code>digital write pin [D0] to</code><code> [0]D0 D1 D0 D1 block=&quot;D#0&quot; fixedInstance let const</code></p><p>固定实例也支持继承。例如，考虑添加以下声明。</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% fixedInstances</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AnalogPin</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DigitalPin</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//% blockId=device_set_analog_pin block=&quot;analog write|pin $this|to $value&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//% blockNamespace=pins</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">analogWrite</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">pins</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//% fixedInstance</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">A0</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">AnalogPin</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>将有一个带有的选项下拉列表，但打开的选项现在是，和 <code>.analog</code> <code>writeA0</code> <code>digital</code> <code>write</code> <code>D0 </code> <code>D1</code> <code>A0</code></p><p>带有注释的变量可以添加到任何地方，甚至可以添加到不同的库或命名空间中。<code>fixedInstance</code></p><p>此功能通常与属性一起使用 <code>indexedInstance*</code></p><p>该属性指定工具箱中的哪个抽屉将用于此块。它可以在方法或类上指定（应用于类中的所有方法）。通常，您还需要在类或方法上进行设置。 <code>blockNamespace</code> <code>color=...</code></p><p>也可以在 TypeScript 中定义要在块中使用的实例，例如：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">pins</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% fixedInstance whenUsed</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">A7</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">AnalogPin</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">7</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>注释导致变量仅在使用时包含在编译中，即使它是用可能会产生副作用的东西初始化的。当没有初始值设定项或初始值设定值是一个简单常量时，这会自动发生，但对于函数调用和构造函数，必须包含 <code>whenUsed</code> <code>whenUsed</code></p><p><strong>Playground 示例：</strong><a href="https://makecode.com/playground#language-fixed-instances" target="_blank" rel="noreferrer">固定实例</a></p><h3 id="属性" tabindex="-1">属性 <a class="header-anchor" href="#属性" aria-hidden="true">#</a></h3><p>TypeScript 中定义的类的字段和 get/set 访问器可以在块中公开。通常，对于给定的类型，您需要一个用于所有 getter 的块，一个用于 setter 的块以及一个用于更新（编译到运算符）的块。这可以通过注释自动完成，例如：<code>+=</code> <code>//%</code> <code>blockCombine</code></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Foo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% blockCombine</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% blockCombine</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// exposed with custom name</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% blockCombine block=&quot;foo bar&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">foo_bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// not exposed</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">_bar</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">_qux</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// exposed as read-only (only in the getter block)</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% blockCombine</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">bar</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_bar</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// exposed in both getter and setter</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% blockCombine</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">qux</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_qux</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% blockCombine</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">qux</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">v</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">v</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">42</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_qux</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">v</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><strong>Playground 示例：</strong><a href="https://makecode.com/playground#classes" target="_blank" rel="noreferrer">类</a></p><h3 id="工厂" tabindex="-1">工厂 <a class="header-anchor" href="#工厂" aria-hidden="true">#</a></h3><p>如果您希望按需创建类实例，而不是自动创建或使用固定实例，则可以创建工厂函数来创建实例。这通常是一个简单的函数，它用运算符实例化类，并可能将一些参数值作为选项传递给构造函数。<code>new</code></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% color=&quot;#FF8000&quot;</span></span>
<span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Widgets</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">class</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Gizmo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    _active</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">activate</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_active</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">activate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    setInactive</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_active</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Create a Gizmo widget and automtically set it to a variable</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% block=&quot;create gizmo&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% blockSetVariable=gizmo</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">createGizmo</span><span style="color:#89DDFF;">():</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Gizmo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Gizmo</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>为了确保在使用块时有一个有效的类实例，该属性为新实例设置了一个变量。在上面的示例中，属性将自动创建的实例并将变量设置为该实例。如果变量不存在，则会创建该变量。这允许在将块拉入编辑器时默认创建的有效实例。<code>blockSetVariable</code> <code>blockSetVariable</code> <code>Gizmo</code> <code>gizmo</code> <code>gizmo</code> <code>Gizmo</code></p><p><strong>Playground 示例：</strong><a href="https://makecode.com/playground#factories" target="_blank" rel="noreferrer">工厂</a></p><h3 id="命名空间附件" tabindex="-1">命名空间附件 <a class="header-anchor" href="#命名空间附件" aria-hidden="true">#</a></h3><p>如果类是在命名空间外部定义的，但您希望为其方法或与命名空间关联的财产定义块，则可以将类附加到命名空间。在类定义的开头，添加带有属性的注释，并将其设置为关联命名空间的名称。使用 Factory 中示例中的类，注释可能是 <code>blockNamespace</code></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% blockNamespace=Widgets color=&quot;#FF8000&quot;</span></span>
<span class="line"></span></code></pre></div><p>这允许类中的块与名称空间中的其他块一起出现在编辑器中。还要注意，类的设置与块的颜色相匹配<code>Gizmo</code> <code>Widgets</code> <code>color</code> <code>Widgets</code></p><p>在此示例中，前面的类被放置在命名空间之外。此外，该方法被转换为一个块，以便与中的其他块一起显示<code>Gizmo</code> <code>Widgets</code> <code>setInactive</code> <code>Widgets</code></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% blockNamespace=Widgets color=&quot;#FF8000&quot;</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Gizmo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">_active</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">activate</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_active</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">activate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Set the Gizmo widget to inactive</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% block=&quot;set %Widgets(gizmo) to inactive&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">setInactive</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_active</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% color=&quot;#FF8000&quot;</span></span>
<span class="line"><span style="color:#C792EA;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Widgets</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Create a Gizmo widget and automtically set it to a variable</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% block=&quot;create gizmo&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//% blockSetVariable=gizmo</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">createGizmo</span><span style="color:#89DDFF;">():</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Gizmo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Gizmo</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><strong>Playground 示例：</strong><a href="https://makecode.com/playground#factories" target="_blank" rel="noreferrer">工厂</a></p><p>该属性包括对工厂功能创建的变量的引用。默认情况下，这将块与有效的实例匹配。<code>block</code> <code>setInactive</code> <code>gizmo</code> <code>createGizmo</code></p><h2 id="字段编辑器" tabindex="-1">字段编辑器 <a class="header-anchor" href="#字段编辑器" aria-hidden="true">#</a></h2><p>字段编辑器允许您控制如何输入或选择参数值。字段编辑器是一个影子块，它调用选择 UI 元素、项目下拉列表或其他扩展输入方法的呈现。</p><p>使用具有字段编辑器名称的属性将字段编辑器附加到参数。在此示例中，打开或关闭 LED 的功能使用字段编辑器将开关元素显示为块参数 <code> shadow</code> <code>toggleOnOff</code></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * Toggle the LED on or off</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% block=&quot;LED $on&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% on.shadow=&quot;toggleOnOff&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ledOn</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">on</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">boolean</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><h3 id="内置字段编辑器" tabindex="-1">内置字段编辑器 <a class="header-anchor" href="#内置字段编辑器" aria-hidden="true">#</a></h3><p>有现成的字段编辑器，它们是内置的，可以直接在块中使用：</p><ul><li><a href="https://makecode.com/playground#field-editors-range" target="_blank" rel="noreferrer">Range</a></li><li><a href="https://makecode.com/playground#field-editors-color" target="_blank" rel="noreferrer">Color Picker</a></li><li><a href="https://makecode.com/playground#field-editors-toggle" target="_blank" rel="noreferrer">Toggle</a></li><li><a href="https://makecode.com/playground#field-editors-dropdowns" target="_blank" rel="noreferrer">Time Picker</a></li><li><a href="https://makecode.com/playground#field-editors-gridpicker" target="_blank" rel="noreferrer">Grid Picker</a></li><li><a href="https://makecode.com/playground#field-editors-note" target="_blank" rel="noreferrer">Note</a></li><li><a href="https://makecode.com/playground#field-editors-protractor" target="_blank" rel="noreferrer">Protractor</a></li><li><a href="https://makecode.com/playground#field-editors-speed" target="_blank" rel="noreferrer">Speed</a></li><li><a href="https://makecode.com/playground#field-editors-turn-ratio" target="_blank" rel="noreferrer">Turn Ratio</a></li></ul><h3 id="自定义字段编辑器" tabindex="-1">自定义字段编辑器 <a class="header-anchor" href="#自定义字段编辑器" aria-hidden="true">#</a></h3><p>如果要为块创建自定义字段编辑器，则需要为其定义阴影块。这是用作参数属性的名称。<code>blockId</code> <code>shadow</code></p><p>以下是设置网球比赛分数的示例字段编辑器：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * Get the score for a tennis game</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">score</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% blockId=tennisScore block=&quot;$score&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% blockHidden=true</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% colorSecondary=&quot;#FFFFFF&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% score.fieldEditor=&quot;numberdropdown&quot; score.fieldOptions.decompileLiterals=true</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% score.fieldOptions.data=&#39;[[&quot;Love&quot;, 1], [&quot;15&quot;, 2], [&quot;30&quot;, 3], [&quot;40&quot;, 4], [&quot;Game&quot;, 5]]&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">__tennisScore</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">score</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">score</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% block=&quot;set game score $score&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//% score.shadow=&quot;tennisScore&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setScore</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">score</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span></code></pre></div><p>通过设置为隐藏块。该参数设置了三个属性：<code>blockHidden</code> <code>true</code> <code>score</code></p><ul><li><code>fieldEditor</code> - 用于选择值的 UI 元素</li><li><code>fieldOptions.decompileLiterals</code> - 设置为以将值与其文字形式匹配。<code>true</code></li><li><code>fieldOptions.data</code> - 选择下拉列表的名称与值匹配列表。&gt;–或–</li><li><code>fieldOptions.values</code> - 可从中选择的简单值列表，如：&gt; <code>vehicles.fieldOptions.values=&#39;[[&quot;truck&quot;], [&quot;airplane&quot;], [&quot;cruise ship&quot;]]&#39;</code></li></ul><p><strong>Playground 示例：</strong><a href="https://makecode.com/playground#field-editors-dropdowns" target="_blank" rel="noreferrer">自定义字段编辑器</a></p><h2 id="排序" tabindex="-1">排序 <a class="header-anchor" href="#排序" aria-hidden="true">#</a></h2><p>所有块的默认权重为 50，用于在 UI 中对它们进行排序，权重最高的块首先显示。要调整<a href="https://makecode.com/playground#basic-ordering" target="_blank" rel="noreferrer">排序</a>，只需使用宏注释函数：<code>weight</code></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% weight=10</span></span>
<span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"></span></code></pre></div><p>如果给定的 API 仅用于块，并且在 TypeScript 中没有太多意义（例如，因为有其他 TypeScript API），您可以使用 flag 来禁用在自动完成中显示它。 <code>//%</code> <code>hidden</code></p><h2 id="分组" tabindex="-1">分组 <a class="header-anchor" href="#分组" aria-hidden="true">#</a></h2><p>要将块放入先前定义的组（请参阅本页顶部的<a href="https://makecode.com/defining-blocks#category" target="_blank" rel="noreferrer">类别</a>部分），请使用属性。组的名称必须与您在命名空间中定义的组之一完全匹配 <code>group</code></p><blockquote><p><strong>提示：</strong> 使用组功能时，块仅与同一组中其他块的权重进行比较。</p></blockquote><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% group=&quot;LED Matrix&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"></span></code></pre></div><p>如果不想显示标签，可以使用 <strong>blockGap</strong> 宏手动将块分组在一起。它允许您指定工具箱中当前块与下一块之间的距离。与该参数相结合，它允许您直观地将块分组在一起，基本上复制了分组功能，但没有标签。默认值为。<code>weight</code> <code>blockGap</code> <code>8</code></p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% blockGap=14</span></span>
<span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"></span></code></pre></div><h2 id="变量赋值" tabindex="-1">变量赋值 <a class="header-anchor" href="#变量赋值" aria-hidden="true">#</a></h2><p>如果一个块实例化了一个自定义对象，比如一个精灵，那么用户很可能希望将其存储在一个变量中。添加以修改工具箱条目以包含变量。<code>blockSetVariable</code></p><h2 id="测试您的块" tabindex="-1">测试您的块 <a class="header-anchor" href="#测试您的块" aria-hidden="true">#</a></h2><p>我们建议迭代构建块API，并在编辑器中试用，以获得“感觉”。要做到这一点，理想的设置是：-使用本地运行目标-保持打开TypeScript的代码编辑器，在那里可以编辑API-刷新浏览器并在虚拟程序上尝试更改<code>pxt serve</code></p><p>有趣的是，您可以设计整个API而无需实现它！</p><h2 id="弃用块" tabindex="-1">弃用块 <a class="header-anchor" href="#弃用块" aria-hidden="true">#</a></h2><p>要弃用现有API，可以添加 <strong>deprecated</strong> 的属性，如下所示：</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//% deprecated=true</span></span>
<span class="line"></span></code></pre></div><p>这将导致API在TypeScript中仍然可用，但阻止块出现在Blockly工具箱中。如果用户尝试加载使用旧API的项目，则只要存在TypeScript API，该项目仍将正确加载。项目中任何已弃用的块都将显示在编辑器中，但不会显示在工具箱中。</p><h2 id="api设计提示和技巧" tabindex="-1">API设计提示和技巧 <a class="header-anchor" href="#api设计提示和技巧" aria-hidden="true">#</a></h2><p>为块编辑器设计各种API时收集了一些提示。</p><ul><li><strong>为初学者设计：</strong> 块接口适合初学者。您需要为此创建一个特定的类C函数层。</li><li><strong>用户将尝试捕捉到一起的任何操作：</strong> 您的运行时应该处理具有优雅降级的无效输入，而不是突然崩溃。一些用户会尝试将任何东西都放在一起，做好准备。</li><li><strong>OO在块中很麻烦：</strong> 们建议使用类似C的API，而不是OO类。它可以更好地映射到块</li><li><strong>保持较小的块数：</strong> 工具箱里只有这么多空间。具体说明要在块中看到的每个API。</li></ul></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-c5936a1e data-v-e033cd21><div class="edit-info" data-v-e033cd21><div class="edit-link" data-v-e033cd21><a class="VPLink link edit-link-button" href="https://github.com/tuliwen/pxt-doc/edit/main/docs/guide/defining-blocks.md" target="_blank" rel="noreferrer" data-v-e033cd21 data-v-30c06bd3><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-e033cd21><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> 在 GitHub 上编辑此页面<!--]--><!----></a></div><div class="last-updated" data-v-e033cd21><p class="VPLastUpdated" data-v-e033cd21 data-v-355aa5ef>最后更新: <time datetime="2023-02-01T11:41:50.000Z" data-v-355aa5ef></time></p></div></div><div class="prev-next" data-v-e033cd21><div class="pager" data-v-e033cd21><a class="pager-link prev" href="/pxt-doc/guide/pxtarget" data-v-e033cd21><span class="desc" data-v-e033cd21>上一页</span><span class="title" data-v-e033cd21>paxtarget.json</span></a></div><div class="has-prev pager" data-v-e033cd21><a class="pager-link next" href="/pxt-doc/guide/simshim" data-v-e033cd21><span class="desc" data-v-e033cd21>下一页</span><span class="title" data-v-e033cd21>自动生成.d.ts</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"guide_partial-flashing.md\":\"92679224\",\"cl_staticpkg.md\":\"04753129\",\"guide_async.md\":\"9f3334cb\",\"guide_board.md\":\"e65a5890\",\"cl_pyconv.md\":\"57a55034\",\"cl_update.md\":\"11c19d3a\",\"cl_cli.md\":\"d66a77fc\",\"cl_bump.md\":\"5c942bbb\",\"cl_hidserial.md\":\"db7529b4\",\"guide_extensions.md\":\"60fc241c\",\"cl_login.md\":\"a69639a1\",\"cl_deploy.md\":\"c55cf2db\",\"cl_cherrypick.md\":\"e4d4f691\",\"guide_defining-blocks.md\":\"7a82cb49\",\"cl_build.md\":\"d9d51327\",\"guide_pxt-json.md\":\"9122a9e3\",\"guide_what-is-pxt.md\":\"39c2c01c\",\"index.md\":\"fc67375f\",\"guide_source-embedding.md\":\"6c95c2a9\",\"guide_staticpkg.md\":\"b0e5854f\",\"guide_simulator.md\":\"89c086a3\",\"guide_pxtarget.md\":\"3583f31f\",\"guide_target-creation.md\":\"b17da773\",\"guide_simshim.md\":\"34471c0a\",\"guide_theming.md\":\"b22f0800\",\"guide_samd21targets.md\":\"cfa2167d\"}")</script>
    <script type="module" async src="/pxt-doc/assets/app.c798c272.js"></script>
    
  </body>
</html>